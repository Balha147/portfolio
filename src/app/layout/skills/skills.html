<section id="skills" class="relative py-12 lg:py-20 scroll-mt-20 overflow-hidden bg-[var(--bg-main)]">
  <header class="text-center relative z-10">
    <h2 class="text-5xl lg:text-7xl font-black tracking-tighter text-[var(--text-main)]">
      Technologies
    </h2>
    <div class="mt-6 mx-auto h-1.5 w-24 rounded-full bg-[var(--btn-gradient)]"></div>
  </header>
<div class="relative w-full overflow-hidden bg-[var(--bg-main)]">

  <div class="flex items-center justify-center h-[450px] [perspective:1200px]">
    <div class="relative flex items-center justify-center w-full">

      @for (skill of skills(); track $index) {
        <div
          class="absolute transition-all duration-700 ease-out will-change-transform"
          [style.transform]="getCardStyles($index).transform"
          [style.z-index]="getCardStyles($index).zIndex"
          [style.opacity]="getCardStyles($index).opacity"
          [style.pointer-events]="getCardStyles($index).pointerEvents"
        >
          <div class="group relative h-60 w-48 rounded-[2rem] border border-white/10
                      bg-white/5 backdrop-blur-2xl shadow-2xl transition-all duration-500
                      [transform-style:preserve-3d] hover:border-[var(--primary)]/50"
                      (mouseenter)="isPaused.set(true)"
                      (mouseleave)="isPaused.set(false)">

            <div class="relative z-10 flex h-full flex-col items-center justify-center gap-6 [transform:translateZ(50px)]">
              <div class="relative p-6 rounded-2xl bg-[var(--bg-card)] shadow-[inset_0_0_20px_rgba(255,255,255,0.05)]">
                <img [ngSrc]="'assets/images/' + skill.icon"
                     [alt]="skill.name"
                     width="64" height="64"
                     priority
                     class="drop-shadow-[0_0_15px_var(--primary)]" />
              </div>
              <p class="text-sm font-black text-[var(--text-main)] uppercase tracking-[0.2em]">
                {{ skill.name }}
              </p>
            </div>

            <div class="absolute inset-0 rounded-[2rem] bg-gradient-to-tr from-[var(--primary)]/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
          </div>
        </div>
      }

    </div>
  </div>

  <div class="flex justify-center gap-3 mt-8">
    @for (s of skills(); track $index) {
      <button
        (click)="activeIndex.set($index)"
        class="h-1.5 transition-all duration-500 rounded-full"
        [class]="$index === activeIndex() ? 'w-10 bg-[var(--primary)] shadow-[0_0_10px_var(--primary)]' : 'w-3 bg-white/10 hover:bg-white/30'"
      ></button>
    }
  </div>
</div>
</section>
